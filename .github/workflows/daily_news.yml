# Get current hour in UTC
HOUR=$(date -u +%H)

# Default: Scrape Yes, Report No
# This handles the 08, 11, 14, 17 runs perfectly
REPORT="no"
SCRAPE="yes"

# If it is the 18:00 UTC run (Final Run)
if [ "$HOUR" -eq "18" ]; then
  REPORT="yes"
  SCRAPE="yes" # Keep this YES so you catch news from the last hour!
fi

# Manual Override logic
if [ "${{ github.event.inputs.send_report }}" == "yes" ]; then
  REPORT="yes"
  SCRAPE="yes"
fi

echo "Current Hour (UTC): $HOUR"
echo "Running Mode: Scrape=$SCRAPE, Report=$REPORT"

python main.py -s $SCRAPE -r $REPORT
